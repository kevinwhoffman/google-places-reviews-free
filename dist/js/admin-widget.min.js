!function(e){"use strict";function n(){t(),i(),c()}function t(){e('.gpr-widget-toggler:not("clickable")').each(function(){e(this).addClass("clickable").unbind("click").click(function(){e(this).toggleClass("toggled"),e(this).next().slideToggle()})}),e(".limit-reviews-option").each(function(){var n=e(this).find("input"),t=(n.prop("checked"),e(this).next(".review-character-limit"));n.on("click",function(){t.slideToggle()})})}function i(){var n=e(".gpr-autocomplete"),t=e(".gpr-types");n.each(function(i,c){var o=new google.maps.places.Autocomplete(n[i]);e(t).on("change",function(){var t=e(this).val();o.setTypes([t]),e(n).val("")}),a(o,n[i]),e(n).keydown(function(e){return 13==e.which?!1:void 0})})}function a(n,t){google.maps.event.addListener(n,"place_changed",function(){var i=n.getPlace();return i.place_id?(e(t).parentsUntil("form").find(".location").val(i.name),e(t).parentsUntil("form").find(".place_id").val(i.place_id),void e(t).parentsUntil("form").find(".set-business").slideDown()):(alert("No place reference found for this location."),!1)})}function c(){e(".tooltip-info").tipsy({fade:!0,html:!0,gravity:"s",delayOut:1e3,delayIn:500})}e(window).load(function(){n()}),e(document).on("click",".gpr-clear-cache",function(n){n.preventDefault();var t=e(this);t.next(".cache-clearing-loading").fadeIn("fast");var i={action:"clear_widget_cache",transient_id_1:e(this).data("transient-id-1"),transient_id_2:e(this).data("transient-id-2")};jQuery.post(ajaxurl,i,function(n){console.log(n),e(".cache-clearing-loading").hide(),t.prev(".cache-message").text(n).fadeIn("fast").delay(2e3).fadeOut()})}),e(document).ajaxSuccess(function(e,n,a){t(),i(),c()})}(jQuery);